<div *ngIf="loading" class="col h-100 d-flex justify-content-center align-items-center loader-container">
  <div class="is-loader"></div>
</div>

<div *ngIf="franchiseInfo && !loading">

  <is-card class="mb-2">
    <is-card-content>
      <div class="position-relative d-flex align-items-center bg_image_1">
        <img style="position: absolute; height: 100%; width: 100%;"
             [src]="getFranshiseBanner()"/>
        <div class="position-absolute d-flex w-100 h-100 px-4 justify-content-between align-items-center">
          <div class="d-flex align-items-center justify-content-start">
            <div class="position-relative d-flex justify-content-end ml-3 align-items-center">
              <i
                *ngIf="isEditingMode"
                class="fa fa-edit franchise__logo__edit__icon position-absolute"
                (click)="onEditLogoHandler(editLogoDialog)"></i>
              <img
                style="z-index: 1;"
                class="franchise__logo__image"
                [src]="franchiseInfo.logo || 'https://via.placeholder.com/80/575d6be6/FFFFFF/?text=Logo'"
                alt=""
                height="80"
                width="80"/>
            </div>
            <div class="d-flex justify-content-start">
              <div class="row">
                <div class="col-12 ml-2">
                  <span
                    class="fa fa-star star_icons px-1"
                    *ngFor="let rating of ratingArray"
                    [class.checked]="rating <= franchiseInfo.rating"></span>
                  <!-- <span class="text-white px-1">(41)</span>
                          <span class="text-white px-1">Reviews</span> -->
                </div>
                <div class="col-12 ml-2">
                  <h4 class="text-white d-block">
                    {{ franchiseInfo.brandName }}
                  </h4>
                </div>
              </div>
            </div>
          </div>
          <div class="d-flex align-items-center justify-content-end">
            <i
              *ngIf="isEditingMode && franchiseInfo.isBannerEditable"
              class="fa fa-edit fa-2x text_blue franchise__banner__edit__icon mr-4"
              (click)="onEditBannerHandler()"
            ></i>
          </div>
        </div>
      </div>    
    </is-card-content>
  </is-card>

<is-card *ngIf="!isEditingMode">
  <is-card-header>
    <div class="w-100">
      <div class="w-100 d-flex justify-content-between">
        <h2>Overview</h2>
        <i class="fa fa-edit icon-color" (click)="setEditingMode()"></i>
      </div>
      <div class="d-flex w-100">
        <p class="mb-0 text-left overview__text">
          {{
            franchiseInfo.welcomeNote || "Your welcome note will be placed here"
          }}
        </p>
      </div>
    </div>
  </is-card-header>
  <is-card-content>
    <h3>Address</h3>
    <p class="mb-0 text-left overview__text">
      {{ franchiseInfo.address || "Your Address" }}
    </p>

    <h3 class="mt-4">Contact Info</h3>
    <div
      class="d-flex justify-content-start w-100 mt-2"
      *ngFor="let contact of franchiseInfo.contact"
    >
      <div class="col-4 pl-0">
        <div class="d-flex align-items-center">
          <i class="fa fa-user mr-2" aria-hidden="true"></i>
          <span>
            {{
              contact.franchiseContactPersonName ||
                "Your Name will be added here"
            }}
          </span>
        </div>
      </div>
      <div class="col-4 pl-0">
        <div class="d-flex align-items-center">
          <i class="fa fa-mobile mr-2" aria-hidden="true"></i>
          <span>
            {{
              contact.franchiseContactPersonPhone ||
                "Your contact will be added here"
            }}
          </span>
        </div>
      </div>
      <div class="col-4 pl-0 pr-0">
        <div class="d-flex align-items-center">
          <i class="fa fa-envelope mr-2" aria-hidden="true"></i>
          <span>
            {{ contact.email || "Your Email will be added here" }}
          </span>
        </div>
      </div>
    </div>

    <h3 class="mt-4">Status</h3>
    <div class="w-50 d-flex">
      <div class="mr-3">
        <strong>Opening Time</strong>
      </div>
      <div>{{ startTime }}</div>
    </div>
    <div class="w-50 d-flex">
      <div class="mr-3">
        <strong>Closing Time</strong>
      </div>
      <div>{{ endTime}}</div>
    </div>

    <h3 class="mt-4">General Info</h3>
    <div class="w-50 d-flex">
      <div class="mr-3">
        <strong>Commission</strong>
      </div>
      <div>{{ franchiseInfo.commission }} %</div>
    </div>
    <div class="w-50 d-flex">
    <div *ngIf="franchiseInfo.doDelivery" class="mr-3">
      <strong>Delivery Range</strong>
    </div>
    <div *ngIf="franchiseInfo.doDelivery">{{ franchiseInfo.deliveryRange }} {{franchiseInfo.deliveryRange?" KM ":" "}}</div>
    </div>
  </is-card-content>
</is-card>
</div>
<edit-overview
  *ngIf="isEditingMode && !loading"
  [data]="franchiseInfo"
  (overviewEdited)="overviewEditedHandler()"
  (overviewEditedCancelled)="cancelEditing()"
></edit-overview>
